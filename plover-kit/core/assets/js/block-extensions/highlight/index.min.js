(()=>{"use strict";const e=window.wp.hooks,t=window.plover.utils,l=window.wp.blockEditor,i=window.wp.element,o=window.wp.richText,r=window.ReactJSXRuntime,s=({attributes:s,...n})=>{const h=(0,i.useRef)(null),a=(0,e.applyFilters)("plover.highlight.previewWrapProps",(0,l.useBlockProps)({className:(0,e.applyFilters)("plover.highlight.previewClassnames",{[`plover-prism prism-${s.theme}-theme`]:!0,[`language-${s.language}`]:!0},s)}),s);return(0,i.useEffect)((()=>{h&&h.current&&window.Prism&&window.Prism.highlightElement(h.current,!1)}),[h,s?.content,s.theme]),(0,e.applyFilters)("plover.highlight.previewBlockEdit",(0,r.jsx)("pre",{...a,children:(0,r.jsx)("code",{ref:h,children:(0,t.isString)(s?.content)?(0,r.jsx)(i.RawHTML,{children:s?.content}):(0,o.getTextContent)(s?.content)})}),{attributes:s,blockWrapProps:a,...n})};function n({BlockEdit:e,...t}){const{attributes:i}=t,o=(0,l.useBlockProps)().className.split(" ").filter((e=>e.startsWith("align"))).join(" ");return(0,r.jsx)("div",{className:`prism-${i.theme}-theme ${o}`,children:(0,r.jsx)(e,{...t})})}const h=window.wp.components,a=window.wp.i18n,g=window.plover.components,p=({attributes:i,setAttributes:o})=>{const s=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.__experimentalToggleGroupControl,{isBlock:!0,label:(0,a.__)("Style","plover"),value:i.highlight,onChange:e=>{o({highlight:e})},children:[(0,r.jsx)(h.__experimentalToggleGroupControlOption,{value:"highlight",label:(0,a.__)("Highlight","plover")}),(0,r.jsx)(h.__experimentalToggleGroupControlOption,{value:"none",label:(0,a.__)("None","plover")})]}),"highlight"===i.highlight&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.SelectControl,{label:(0,a.__)("Theme","plover"),value:i.theme,options:(0,t.getExtensionSetting)("highlight","support_themes",[]),onChange:e=>o({theme:e}),__nextHasNoMarginBottom:!0}),(0,r.jsx)(h.SelectControl,{label:(0,a.__)("Language","plover"),value:i.language,options:(0,t.getExtensionSetting)("highlight","support_languages",[]),onChange:e=>o({language:e}),__nextHasNoMarginBottom:!0})]})]});return(0,r.jsx)(l.InspectorControls,{children:(0,r.jsxs)(h.PanelBody,{children:[(0,e.applyFilters)("plover.highlight.InspectorControls",s,i,o),!(0,t.is_premium)()&&(0,r.jsxs)(g.Tips,{children:[(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,a.sprintf)(/* translators: %s is the premium text and link. */ /* translators: %s is the premium text and link. */
(0,a.__)("Upgrade to %s to access these features:","plover"),'<a class="accent" href="'+(0,t.upsell_url)()+'">'+(0,a.__)("Premium","plover")+"</a>")}}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-highlight/#show-line-numbers",target:"_blank",children:(0,a.__)("Show line numbers by default","plover")})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-highlight/#show-language",target:"_blank",children:(0,a.__)("Show languages by default","plover")})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-highlight/#show-copy-button",target:"_blank",children:(0,a.__)("Show copy button by default","plover")})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-highlight/#themes-preview",target:"_blank",children:(0,a.__)("More highlight themes","plover")})})]}),(0,r.jsx)("div",{children:(0,r.jsx)(h.Button,{href:(0,t.upsell_url)(),target:"_blank",variant:"primary",children:(0,a.__)("Upgrade Now â†—","plover")})})]})]})})},c={highlight:{type:"string",default:"highlight"},theme:{type:"string",default:"github-copilot"},language:{type:"string",default:"clike"}};(0,e.addFilter)("blocks.registerBlockType","plover/highlight-attributes",((e,l)=>("core/code"===l&&(e.attributes={...e.attributes,...(0,t.getExtensionSetting)("highlight","attributes",c)}),e))),(0,e.addFilter)("editor.BlockEdit","plover/highlight-controls",(e=>t=>{const{attributes:l,isSelected:i,name:o}=t;return"core/code"!==o?(0,r.jsx)(e,{...t}):(0,r.jsxs)(r.Fragment,{children:["none"===l.highlight?(0,r.jsx)(e,{...t}):i?(0,r.jsx)(n,{BlockEdit:e,...t}):(0,r.jsx)(s,{...t}),(0,r.jsx)(p,{...t})]})}))})();