(()=>{"use strict";const e=window.wp.hooks,n=window.wp.compose,t=window.wp.element,a=window.plover.utils;function i(e){var n,t,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(t=i(e[n]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}const r=function(){for(var e,n,t=0,a="",r=arguments.length;t<r;t++)(e=arguments[t])&&(n=i(e))&&(a&&(a+=" "),a+=n);return a},o=window.wp.blockEditor,s=window.wp.components,l=window.wp.i18n,c=window.wp.primitives,p=window.ReactJSXRuntime,m=(0,p.jsx)(c.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)(c.Path,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"})}),d=window.plover.components;function u({playAnimation:n,attributes:t,setAttributes:i}){var r;const{entranceAnimation:c}=t,u=(null!==(r=(0,a.getCustomBlockSupportConfig)("entranceAnimation",[])?.animations)&&void 0!==r?r:[]).map((e=>({label:e.replaceAll("-"," "),value:e})));return(0,p.jsx)(o.InspectorControls,{children:(0,p.jsxs)(s.PanelBody,{title:(0,l.__)("Plover: Entrance Animation","plover"),initialOpen:!1,children:[!!c&&(0,p.jsx)(s.Button,{size:"compact",iconSize:24,icon:m,variant:"secondary",onClick:n,style:{marginBottom:"12px"},children:(0,l.__)("Preview Animation","plover")}),(0,p.jsx)(d.Select,{value:c,label:(0,l.__)("Animation","plover"),displayAsList:!0,options:[{label:"",value:""},...u],onChange:e=>{i({entranceAnimation:e})}}),(0,e.applyFilters)("plover.entranceAnimation.InspectorControls",null,t,i),!(0,a.is_premium)()&&(0,p.jsx)(d.Tips,{children:(0,p.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,l.sprintf)(/* translators: %s is the premium text and link. */ /* translators: %s is the premium text and link. */
(0,l.__)("Upgrade to %s for more entrance animations and options.","plover"),'<a href="'+(0,a.upsell_url)()+'" target="_blank">'+(0,l.__)("Premium","plover")+"</a>")}})}),(0,p.jsx)(d.Tips,{children:(0,p.jsx)("a",{href:"https://wpplover.com/docs/plover-kit/modules/entrance-animation/",target:"_blank",children:(0,l.__)("Documentation â†—","plover")})})]})})}const v=e=>{const n=e?.parentElement;return n?"BODY"===n?.tagName?n:v(n):document.body};function w({play:e,attributes:n}){const i=(0,t.useRef)(),{entranceAnimation:r,entranceAnimationDuration:o,entranceAnimationDelay:s}=n;return(0,t.useEffect)((()=>{if(!i?.current)return;const e=(0,a.findElementFromCurrent)(i?.current,"plover-entrance-animated__block");e&&(e=>{var n,t;const{element:i,animation:r,duration:o}=e,s=Number(e.delay),l=v(i),c=["plover-invisible","plover-animated","animated-normal","animated-slow","animated-fast",...null!==(n=(0,a.getCustomBlockSupportConfig)("entranceAnimation",[])?.animations)&&void 0!==n?n:[]],p=(null!==(t=i.className)&&void 0!==t?t:"").split(" ").filter((e=>-1===c.indexOf(e)));i.className=p.join(" "),setTimeout((()=>{l.classList.add("plover-animate-playing"),i.classList.add("plover-animated"),i.classList.add(`animated-${o}`),i.classList.add(r),setTimeout((()=>{i.classList.remove(r),l.classList.remove("plover-animate-playing")}),2e3)}),Math.max(50,isNaN(s)||s<0?0:s))})({element:e,animation:r,duration:o,delay:s})}),[e,i,r,o]),(0,p.jsx)("span",{ref:i,"data-role":"plover-indicator",className:"plover-entrance-animation__editor-indicator"})}const f={entranceAnimation:{type:"string"}};(0,e.addFilter)("blocks.registerBlockType","plover/entrance-animation-attributes",((n,t)=>{var i;if(!(0,a.getPloverSupport)(t,"ploverEntranceAnimation"))return n;const r=null!==(i=(0,a.getCustomBlockSupportConfig)("entranceAnimation",f)?.attributes)&&void 0!==i?i:f;return n.attributes={...n.attributes,...(0,e.applyFilters)("plover.entranceAnimation.attributes",r,{settings:n,name:t})},n})),(0,e.addFilter)("editor.BlockListBlock","plover/with-entrance-animation-classname",(0,n.createHigherOrderComponent)((e=>n=>{const{isSelected:t,name:i,attributes:o}=n;if(!(0,a.hasPloverSupport)(i,"ploverEntranceAnimation"))return(0,p.jsx)(e,{...n});const s={...n?.wrapperProps,className:r(n?.wrapperProps?.className,"plover-entrance-animated__block")};return(0,p.jsx)(e,{...n,wrapperProps:s})}),"withEntranceAnimationClassName")),(0,e.addFilter)("editor.BlockEdit","plover/entrance-animation-controls",(e=>n=>{const{isSelected:i,name:r,attributes:o}=n;if(!(0,a.hasPloverSupport)(r,"ploverEntranceAnimation"))return(0,p.jsx)(e,{...n});const[s,l]=(0,t.useState)(0);return(0,p.jsxs)(p.Fragment,{children:[o?.entranceAnimation?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e,{...n}),(0,p.jsx)(w,{play:s,...n})]}):(0,p.jsx)(e,{...n}),i&&(0,p.jsx)(u,{playAnimation:()=>{l(s+1)},...n})]})}),99)})();